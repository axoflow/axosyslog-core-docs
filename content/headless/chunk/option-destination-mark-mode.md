---
---
<!-- DISCLAIMER: This file is based on the syslog-ng Open Source Edition documentation https://github.com/balabit/syslog-ng-ose-guides/commit/2f4a52ee61d1ea9ad27cb4f3168b95408fddfdf2 and is used under the terms of The syslog-ng Open Source Edition Documentation License. The file has been modified by Axoflow. -->

## mark-mode()

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Accepted values:</td>
<td>`internal` | `dst-idle` | `host-idle` | `periodical` | `none` | `global`</td>
</tr>
<tr class="even">
<td>Default:</td>
<td><p>`internal` for pipe, program drivers</p>
<p>`none` for file, unix-dgram, unix-stream drivers</p>
<p>`global` for syslog, tcp, udp destinations</p>
<p>`host-idle` for global option</p></td>
</tr>
</tbody>
</table>

*Description:* The `mark-mode()` option can be set for the following destination drivers: file(), program(), unix-dgram(), unix-stream(), network(), pipe(), syslog() and in global option.

  - `internal`: When internal mark mode is selected, internal source should be placed in the log path as this mode does not generate mark by itself at the destination. This mode only yields the mark messages from internal source. This is the mode as {{% conditional-text include-if="pe" %}}{{% param "product.abbrev" %}} 3.x{{% /conditional-text %}}{{% conditional-text include-if="ose" %}}{{% param "product.abbrev" %}} 3.3{{% /conditional-text %}} worked. `MARK` will be generated by internal source if there was NO traffic on local sources:
    
    `file()`, `pipe()`, `unix-stream()`, `unix-dgram()`, `program()`

  - `dst-idle`: Sends `MARK` signal if there was NO traffic on destination drivers. `MARK` signal from internal source will be dropped.
    
    `MARK` signal can be sent by the following destination drivers: `network()`, `syslog()`, `program()`, `file()`, `pipe()`, `unix-stream()`, `unix-dgram()`.

  - `host-idle`: Sends `MARK` signal if there was NO local message on destination drivers. for example, `MARK` is generated even if messages were received from tcp. `MARK` signal from internal source will be dropped.
    
    `MARK` signal can be sent by the following destination drivers: `network()`, `syslog()`, `program()`, `file()`, `pipe()`, `unix-stream()`, `unix-dgram()`.

  - `periodical`: Sends `MARK` signal perodically, regardless of traffic on destination driver. `MARK` signal from internal source will be dropped.
    
    `MARK` signal can be sent by the following destination drivers: `network()`, `syslog()`, `program()`, `file()`, `pipe()`, `unix-stream()`, `unix-dgram()`.

  - `none`: Destination driver drops all `MARK` messages. If an explicit mark-mode() is not given to the drivers where `none` is the default value, then `none` will be used.

  - `global`: Destination driver uses the global `mark-mode()` setting. Note that setting the global `mark-mode()` to global causes a syntax error in {{% param "product.abbrev" %}}.


{{% alert title="Note" color="info" %}}

In case of `dst-idle`, `host-idle` and `periodical`, the `MARK` message will not be written in the destination, if it is not open yet.

{{% /alert %}}

Available in {{% conditional-text include-if="pe" %}}{{% param "product.abbrev" %}} 4 LTS{{% /conditional-text %}}{{% conditional-text include-if="ose" %}}{{% param "product.abbrev" %}} 3.4{{% /conditional-text %}} and later.
